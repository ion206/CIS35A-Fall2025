classDiagram
    direction TB

    %% Package: Model
    namespace model {
        class Student {
            -int SID
            -int[] scores
            +getSID() int
            +getScores() int[]
            +setSID(int) void
            +setScores(int[]) void
            +setScore(int, int) void
            +print() void
        }

        class Statistics {
            -int[] lowscores
            -int[] highscores
            -float[] avgscores
            +findlow(Student[]) void
            +findhigh(Student[]) void
            +findavg(Student[]) void
            +print(int) void
        }

        class StudentGrade {
            -Student student
            -Statistics statistics
            +StudentGrade(Student, Statistics)
            +printGradeReport() void
        }
    }

    %% Package: Util
    namespace util {
        class FileIO {
            +readFile(String, Student[]) Student[]
            +serializeStudentGrade(StudentGrade, String) void
            +deserializeStudentGrade(String) StudentGrade
        }
    }

    %% Package: Exception
    namespace exception {
        class StudentGradingException {
            -int errorNo
            -String errorMessage
            +logException() void
            +fixMissingFile() String
            +getErrorNo() int
        }
    }

    %% Package: Adapter
    namespace adapter {
        class StudentAPI {
            <<interface>>
            +printStatistics() void
            +printScore(int) void
        }

        class StudentAPIImpl {
            -Student[] students
            -Statistics stats
            +StudentAPIImpl()
            +printStatistics() void
            +printScore(int) void
        }
    }

    %% Relationships
    %% 1. Realization (Implements)
    StudentAPI <|.. StudentAPIImpl : implements

    %% 2. Aggregation/Composition
    StudentGrade o-- Student : contains
    StudentGrade o-- Statistics : contains
    StudentAPIImpl --> Statistics : uses
    StudentAPIImpl --> Student : uses
    
    %% 3. Dependencies
    FileIO ..> Student : creates/reads
    FileIO ..> StudentGrade : serializes
    FileIO ..> StudentGradingException : throws
    StudentAPIImpl ..> FileIO : uses to load data

    %% 4. Inheritance
    Exception <|-- StudentGradingException : extends

    %% 5. Serializable Marker
    class Serializable {
        <<interface>>
    }
    Serializable <|.. Student
    Serializable <|.. Statistics
    Serializable <|.. StudentGrade